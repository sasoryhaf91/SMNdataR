# üõ∞Ô∏è SMNdataR

### Tools for Processing and Analyzing Mexican Meteorological Data for Climatological Applications

[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.17451875.svg)](https://doi.org/10.5281/zenodo.17451875)
[![License:
MIT](https://img.shields.io/badge/License-MIT-green.svg)](https://sasoryhaf91.github.io/SMNdataR/LICENSE)
[![JOSS
status](https://joss.theoj.org/papers/under_review.svg)](https://joss.theoj.org/)
[![R](https://img.shields.io/badge/R-%3E=3.5-blue.svg)](https://cran.r-project.org/)
[![GitHub
issues](https://img.shields.io/github/issues/sasoryhaf91/SMNdataR.svg)](https://github.com/sasoryhaf91/SMNdataR/issues)

------------------------------------------------------------------------

## üìò Overview

`SMNdataR` is an **open-source R package** designed to automate the
**retrieval, cleaning, and analysis of climatological data** from
Mexico‚Äôs *Servicio Meteorol√≥gico Nacional (SMN)*.  
It provides fully reproducible workflows for handling large volumes of
daily meteorological data, integrating **station metadata**,
**completeness checks**, and optional **hybrid fusion** with open global
datasets such as **NASA POWER**.

The package fills a major gap in the accessibility of meteorological
information in Mexico, where open data are limited and existing systems
(e.g., CLICOM, ERIC IV) do not allow for automated, large-scale
downloads or integration into reproducible analytical pipelines.

------------------------------------------------------------------------

## üåé Key Features

- üì• **Automatic data retrieval:** Download daily SMN data for multiple
  stations at once.  
- üß© **Data harmonization:** Standardizes variable names, metadata, and
  coordinates.  
- üå§Ô∏è **Hybrid integration:** Combines SMN data with global datasets
  (NASA POWER).  
- üßÆ **Analytical utilities:** Completeness, summary, and spatial
  correlation tools.  
- üìä **Export-ready outputs:** Clean, tidy datasets compatible with
  modern R workflows (`tidyverse`, `sf`, etc.).  
- üîÅ **Reproducibility:** Fully scripted and transparent, following FAIR
  and open-science principles.

------------------------------------------------------------------------

## ‚öôÔ∏è Installation

You can install the development version directly from GitHub:

``` r
# Install dependencies (if necessary)
install.packages(c("devtools", "dplyr", "lubridate", "httr", "jsonlite", "sf"))

# Install SMNdataR from GitHub
devtools::install_github("sasoryhaf91/SMNdataR")

# Load the package
library(SMNdataR)
```

## üí° Example Usage

``` r
# Example: Retrieve SMN + NASA POWER (hybrid)
library(SMNdataR)

data <- smn_dl_daily_batch(
  stations   = c("15101", "15021"),
  source     = "hybrid",
  start_date = "1991-01-01",
  end_date   = "2020-12-31",
  vars       = c("T2M_MIN", "T2M_MAX", "PRECTOTCORR")
)

head(data)
```

This retrieves and merges daily precipitation and temperature records
from SMN with satellite-derived variables from NASA POWER at the same
coordinates.

## üìÑ Citation

If you use `SMNdataR` in your research, please cite it as follows:

> Antonio-Fern√°ndez, H., Vaquera-Huerta, H., Rosengaus-Moshinsky, M. M.,
> P√©rez-Rodr√≠guez, P., & Crossa, J. (2025).  
> *SMNdataR: Tools for Processing and Analyzing Mexican Meteorological
> Data for Climatological Applications.*  
> Journal of Open Source Software (submitted). DOI:
> [10.5281/zenodo.17451876](https://doi.org/10.5281/zenodo.17451876)

BibTeX entry:

``` bibtex
@misc{Fernandez2025SMNdataR,
  author  = {Hugo Antonio-Fern√°ndez and Humberto Vaquera-Huerta and Mois√©s Michel Rosengaus-Moshinsky and Paulino P√©rez-Rodr√≠guez and Jos√© Crossa},
  title   = {SMNdataR: Tools for Processing and Analyzing Mexican Meteorological Data for Climatological Applications},
  year    = {2025},
  doi     = {10.5281/zenodo.17451876},
  url     = {https://github.com/sasoryhaf91/SMNdataR},
  publisher = {Zenodo},
}
```

## üèõÔ∏è Funding and Acknowledgements

This work was supported by the *Secretar√≠a de Ciencia, Humanidades,
Tecnolog√≠a e Innvoci√≥n (SECIHTI)* through a doctoral scholarship granted
to the first author under the National Postgraduate System of Mexico. We
acknowledge the *Comisi√≥n Nacional del Agua (CONAGUA)* for maintaining
and providing access to the national meteorological database that forms
the foundation of this package.

We also thank the *Colegio de Postgraduados* and the *Universidad
Mexiquense del Bicentenario* for institutional support during the
development of this research, as well as the International Maize and
Wheat Improvement Center (CIMMYT) for fostering open collaboration in
climate and agricultural research. Their combined contributions have
been essential to the conception, validation, and dissemination of the
`SMNdataR` package.

------------------------------------------------------------------------

## üßæ License

This package is released under the **MIT License**.  
See [LICENSE.md](https://sasoryhaf91.github.io/SMNdataR/LICENSE.md) for
details.

------------------------------------------------------------------------

## üîó Project Links

- üß¨ GitHub Repository: <https://github.com/sasoryhaf91/SMNdataR>  
- üßæ Zenodo DOI: <https://doi.org/10.5281/zenodo.17451876>  
- üìÑ JOSS Submission: *(pending review)*  
- üß† Author ORCID:
  [0000-0002-5355-8476](https://orcid.org/0000-0002-5355-8476)

------------------------------------------------------------------------

## ü§ù Contributing

Contributions, suggestions, and bug reports are welcome!  
Please open an [issue](https://github.com/sasoryhaf91/SMNdataR/issues)
or submit a [pull
request](https://github.com/sasoryhaf91/SMNdataR/pulls).  
If you wish to contribute new features, please describe your proposal
clearly in the issue tracker before submitting a pull request.

------------------------------------------------------------------------

## üß† Contact

**Hugo Antonio-Fern√°ndez**  
Doctoral Researcher ‚Äî Colegio de Postgraduados / Researcher -
Universidad Mexiquense del Bicentenario  
üìß Email: <uiem.haf@gmail.com>  
üåê ORCID: [0000-0002-5355-8476](https://orcid.org/0000-0002-5355-8476)

------------------------------------------------------------------------

## üß≠ Citation Reminder

Please include the DOI and package name in any derivative work.  
Your citation helps recognize the effort invested in developing open and
reproducible climatological tools for Mexico.

> Antonio-Fern√°ndez, H., Vaquera-Huerta, H., Rosengaus-Moshinsky, M. M.,
> P√©rez-Rodr√≠guez, P., & Crossa, J. (2025).  
> *SMNdataR: Tools for Processing and Analyzing Mexican Meteorological
> Data for Climatological Applications.*  
> Journal of Open Source Software, *In Review*.  
> DOI:
> [10.5281/zenodo.17451876](https://doi.org/10.5281/zenodo.17495178)

# Package index

## All functions

- [`gridmex`](https://sasoryhaf91.github.io/SMNdataR/reference/gridmex.md)
  : National 1-km grid for Mexico with altitude

- [`smn_dl_daily_batch()`](https://sasoryhaf91.github.io/SMNdataR/reference/smn_dl_daily_batch.md)
  : Batch Download of Daily Climate Data (SMN, NASA POWER, or Hybrid)

- [`smn_dl_daily_nasa()`](https://sasoryhaf91.github.io/SMNdataR/reference/smn_dl_daily_nasa.md)
  : Download Daily NASA POWER (MERRA-2) Data for a Named Point

- [`smn_dl_daily_raw()`](https://sasoryhaf91.github.io/SMNdataR/reference/smn_dl_daily_raw.md)
  : Download Raw Daily Data for a Station (robust header detection)

- [`smn_dl_daily_single()`](https://sasoryhaf91.github.io/SMNdataR/reference/smn_dl_daily_single.md)
  : Download and Structure Daily Station Data (SMN)

- [`smn_dl_monthly_single()`](https://sasoryhaf91.github.io/SMNdataR/reference/smn_dl_monthly_single.md)
  : Download and Aggregate Monthly Climate Data (Single Station)

- [`smn_dl_yearly_single()`](https://sasoryhaf91.github.io/SMNdataR/reference/smn_dl_yearly_single.md)
  :

  Download and Aggregate **Yearly** Climate Data (Reduce Format)

- [`smn_info_extract_coordinates()`](https://sasoryhaf91.github.io/SMNdataR/reference/smn_info_extract_coordinates.md)
  : Extract Coordinates for Multiple Stations

- [`smn_info_get_station()`](https://sasoryhaf91.github.io/SMNdataR/reference/smn_info_get_station.md)
  : Get Station Metadata

- [`smn_int_make_grid()`](https://sasoryhaf91.github.io/SMNdataR/reference/smn_int_make_grid.md)
  : Build a local square grid around a point (km-based) and clip by
  radius (robust CRS handling)

- [`smn_tl_find_nearby()`](https://sasoryhaf91.github.io/SMNdataR/reference/smn_tl_find_nearby.md)
  : Find Nearby SMN Stations and/or NASA Grid Nodes (Hybrid)

- [`stations`](https://sasoryhaf91.github.io/SMNdataR/reference/stations.md)
  : SMN station metadata (Mexico)

# Articles

### All vignettes

- [Getting started with
  SMNdataR](https://sasoryhaf91.github.io/SMNdataR/articles/getting-started.md):
